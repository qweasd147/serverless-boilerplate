{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./config sync ^\\.\\/env\\..*$","webpack:///./config/env.development.js","webpack:///./config/index.js","webpack:///./crud.js","webpack:///./models/crud/Article.js","webpack:///./models/crud/Comment.js","webpack:///./models/crud/index.js","webpack:///./models/db/index.js","webpack:///./models/index.js","webpack:///external \"fs\"","webpack:///external \"path\"","webpack:///external \"sequelize\""],"names":["secret","db","host","port","dialect","name","userId","password","module","exports","env","require","process","Article","Comment","models","create","article","subject","contents","comment","build","addComments","createPost","Sequelize","Model","init","sequelize","idx","type","INTEGER","primaryKey","autoIncrement","STRING","allowNull","TEXT","tableName","associate","hasMany","onDelete","foreignKey","sourceKey","as","instanceMethod","console","log","articleIdx","staticMethod","options","belongsTo","targetKey","sequelizeConn","pool","max","min","acquire","idle","operatorsAliases","logging","define","freezeTableName","timestamps","underscored","crudModels","Database","constructor","_sequelize","_models","Object","assign","keys","map","modelKey","model","database"],"mappings":"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","file":"crud.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./crud.js\");\n","var map = {\n\t\"./env.development\": \"./config/env.development.js\",\n\t\"./env.development.js\": \"./config/env.development.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./config sync recursive ^\\\\.\\\\/env\\\\..*$\";","const secret = {\r\n    db : {\r\n        host : \"192.168.169.129\"\r\n        , port : 3306\r\n        //, dialect : \"mysql\" //db 종류\r\n        , dialect : \"mariadb\"\r\n        , name : \"joo\"      //데이터베이스 이름(스키마)\r\n        , userId : \"joohyung\"\r\n        , password : \"joo123\"\r\n    }\r\n}\r\n\r\nmodule.exports = secret;","module.exports = (function(env){\r\n\r\n    return require(`./env.${env}`);\r\n\r\n})(process.env.NODE_ENV || \"dev\");","import {models} from './models';\r\n\r\nconst {\r\n    Article\r\n    , Comment\r\n} = models;\r\n\r\nconst create = async()=>{\r\n    \r\n    /*\r\n    const article = await Article.findOne({\r\n        where: { idx: 1 }\r\n    });\r\n    */\r\n\r\n    //const article = await Article.findByPk(1);\r\n    const article = await Article.create({\r\n        subject : 'article subject'\r\n        , contents : 'article content'\r\n    });\r\n\r\n    const comment = Comment.build({\r\n        subject : 'Comment subject...'\r\n        , contents : 'Comment contents'\r\n    });\r\n\r\n    //article.instanceMethod();\r\n    //Article.staticMethod();\r\n\r\n    await article.addComments();\r\n}\r\n\r\nconst createPost = async()=>{\r\n\r\n    const article = await Article.create({\r\n        subject : 'subject...'\r\n        , contents : 'contents...'\r\n    });\r\n}\r\n\r\nexport {\r\n    create\r\n}","import Sequelize from 'sequelize'\n\nexport default class Article extends Sequelize.Model {\n  static init(sequelize) {\n\n    return super.init({\n      idx: {\n        type: Sequelize.INTEGER,\n        primaryKey: true,\n        autoIncrement: true\n      }\n      , subject: {\n        type: Sequelize.STRING,\n        allowNull: false,\n      }\n      , contents: {\n        type: Sequelize.TEXT,\n        allowNull: false,\n      }\n    }, {\n      sequelize\n      , tableName : 'article'\n    })\n  }\n\n  static associate(models) {\n    this.hasMany(models.Comment, {\n      onDelete: \"CASCADE\",\n      foreignKey: {\n        allowNull: false\n        , name : 'articleIdx'  //target의 foreign key\n      }\n      , sourceKey : 'idx'     //source의 key값\n      , as : 'Comments'\n    })\n  }\n\n  instanceMethod(){\n    console.log(this.subject, this.contents);\n  }\n\n  async addComments(){\n\n    const Comment = this.sequelize.models.Comment;\n\n    await Comment.create({\n      subject : 'create from article. subject'\n      , contents : 'create from article. contents'\n      , articleIdx : this.idx\n    });\n  }\n\n  static staticMethod(){\n    console.log('static method!');\n  }\n}","import Sequelize from 'sequelize'\n\nexport default class Comment extends Sequelize.Model {\n  static init(sequelize) {\n    let options = {}\n\n    return super.init({\n      idx: {\n        type: Sequelize.INTEGER,\n        primaryKey: true,\n        autoIncrement: true\n      }\n      , subject: {\n        type: Sequelize.STRING,\n        allowNull: false,\n      }\n      , contents: {\n        type: Sequelize.TEXT,\n        allowNull: false,\n      }\n      , articleIdx: {\n        type: Sequelize.INTEGER,\n        allowNull: true,\n      }\n    }, {\n      sequelize\n      , tableName : 'comment'\n    })\n  }\n\n  static associate(models) {\n    this.belongsTo(models.Article, {\n      onDelete: \"CASCADE\",\n      foreignKey: {\n        allowNull: false\n        , name : 'articleIdx'\n      }\n      , targetKey : 'idx'   //fk는 article의 idx를 본다.\n    })\n  }\n}","import Article from './Article';\r\nimport Comment from './Comment';\r\n\r\nexport { Article, Comment };","import Sequelize from 'sequelize'\r\nimport config from '../../config'\r\n\r\nconst {\r\n    host, port, dialect, name, userId, password,\r\n} = process.env\r\n\r\nconst sequelizeConn = new Sequelize(name, userId, password, {\r\n  host: host\r\n  , port : port\r\n  , dialect: dialect    //db 종류\r\n  , pool: {\r\n      max: 5\r\n      , min: 0\r\n      , acquire: 30000  // 연결하는데 최대 30초 걸리도록 설정\r\n      , idle: 10000     // 10초동안 요청 없으면 연결 끊어놓음\r\n  }\r\n  , operatorsAliases: false\r\n  , logging: false\r\n  , define: {\r\n      freezeTableName: true     //테이블 이름이 복수 형태(ex. tableNames) 막기\r\n      , timestamps: false       //모든 테이블에 createAt, updateAt 추가되는거 막기\r\n      , underscored: true       //기본 snake_case로 변경\r\n  }\r\n  , logging: console.log\r\n});\r\n\r\nexport default sequelizeConn;","import fs from 'fs'\nimport path from 'path'\nimport sequelizeConn from './db'\nimport * as crudModels from './crud'\n\nclass Database {\n\n  constructor () {\n    this._sequelize = sequelizeConn\n    this._models = {}\n        \n    // Load each model file\n    /*\n    const models = Object.assign({}, ...fs.readdirSync(__dirname)\n      .filter(file => (file.indexOf(\".\") !== 0) && (file !== \"index.js\"))\n      .filter(filePath => !fs.statSync(path.join(__dirname,filePath)).isDirectory())  //디렉토리 제거\n      .map((file) => {\n        const model = require(path.join(__dirname, file)).default\n        \n        return {\n          [model.name]: model.init(this._sequelize),\n        }\n      })\n    )\n    */\n\n    const models =Object.assign({}, ...Object.keys(crudModels).map(modelKey=>crudModels[modelKey]).map(model => {\n      return {\n        [model.name]: model.init(this._sequelize),\n      }\n    }));\n\n    // Load model associations\n    for (const model of Object.keys(models)) {\n      typeof models[model].associate === 'function' && models[model].associate(models);\n    }\n\n    this._models = models\n  }\n\n  get sequelize () {\n    return this._sequelize\n  }\n\n  get models () {\n    return this._models\n  }\n\n}\n\nconst database = new Database()\n\nexport const models = database.models\nexport const sequelize = database.sequelize","module.exports = require(\"fs\");","module.exports = require(\"path\");","module.exports = require(\"sequelize\");"],"sourceRoot":""}